# carbide-analysis-system-show
硬质合金分析系统项目展示

本项目是和多个国企合金部门合作，研发的一款针对硬质合金微观图像的分析软件，内置多种图像处理功能，如 去噪、阈值分割、形态学操作等。该项目完成了对图像从加载、预处理、合金分割分析到结果报表生成等完整的 硬质合金分析流程。已部署多个深度学习分割模型，相较传统方法在分割准确度上大幅提升，且操作流程更简化。


由于本项目属于实验室横向课题，可展示图像分割效果但不提供源码，如果需要课题合作可以联系。2907098302@qq.com

下面这张图是另外一种碳化钨图像，该图晶粒之间边界不清晰，使用传统方法时难以实现分割但是利用本项目中的深度学习模型可以达到很好的分割效果
![分割例子](https://github.com/user-attachments/assets/b8e9dac2-b19a-424b-9f4e-46557f851a5a)


1.该图属于硬质合金碳化钨晶粒图像中的一种，想要对该图粘连晶粒实现分割方法很多，但是在这张图中，具有代表性的是晶粒的表面含有大量的划痕会在双阈值分割或者RGB分割中会起到很大的影响
![晶相原图](https://github.com/user-attachments/assets/d305e745-0522-4a99-b6bd-925831d6e0c8)

2.深度学习分割中，该过程花费时间取决于图像的大小以及电脑中GPU性能；经测试1024x690图像在4060ti中平均每张分割时间为5s，2024x2024每张图像花费时间为8秒，在工程使用中能够达到不错的效率
![深度学习分割中](https://github.com/user-attachments/assets/c50e3dce-5abe-4049-9ba8-35446ce4b43c)

3.分割结果图
![分割结果](https://github.com/user-attachments/assets/24a66522-ef1a-47e6-b107-fa70026b0669)

4.在相关企业出差时，我们经常面对一些情况：由于合作公司均为国企，大多计算机没有配备网络或者局域网，在面对导出报表时，需要分析员进行分析效果的总结与样本检查叙述时，需要结合样品本身与分析方法进行阐述，而相关软件操作员并不具备专业的图像处理方面知识，因此难以进行良好的报告导出流程。其次，由于软件的操作说明书大概在100M左右文档，当不熟悉某一操作时可能需要打开文档进行查找，对于用户来说可能不方便。！！！最近llama3对话大模型中十分适合这种场景，因此利用chatgpt制作图像处理相关数据集，而我们的软件操作说明书中本身也有类似于对话形式，如 双阈值操作？主菜单->图像处理->双阈值分割,选择两个阈值实现具体分割任务。所以整合图像处理相关知识以及软件操作说明书各个步骤，最终得到一个自定义版本的图像处理相关知识的数据集，数据集大小在10W条左右，进行微调llama3模型
数据集部分如下：
![llama3数据集制作](https://github.com/user-attachments/assets/6dfe9e71-96a7-4d94-b8a5-4f9212ad7ea4)


5.基于llama3原始检查点权重，利用torchtune中的QLora单设备配置文件，对模型进行微调，训练轮数为1，训练平台3090，时间花费27h。得到训练后的原始检查点，考虑本地部署时设备性能可能不足（如cpu、gpu性能一般），使用llama.cpp项目对得到的权重进行量化，量化方式为4Bit，最终大小在5GB左右。
下图为利用LM Studio平台使用训练后经量化后权重
![llama3模型使用](https://github.com/user-attachments/assets/7b4cd101-a520-4a1d-86d0-61c8684ce896)


该模型结果还在完善中，当前效果一般，但是可以进行图像处理方面的回答！！！！！
